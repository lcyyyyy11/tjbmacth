/*!
 * Cropper v4.1.0
 * https://fengyuanchen.github.io/cropper
 *
 * Copyright 2014-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-10-12T07:43:51.850Z
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],a):(b=b||self,a(b.jQuery))}(this,function(bL){bL=bL&&bL.hasOwnProperty("default")?bL["default"]:bL;function H(b5){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){H=function(b6){return typeof b6}}else{H=function(b6){return b6&&typeof Symbol==="function"&&b6.constructor===Symbol&&b6!==Symbol.prototype?"symbol":typeof b6}}return H(b5)}function aE(b5,b6){if(!(b5 instanceof b6)){throw new TypeError("Cannot call a class as a function")}}function bN(b8,b6){for(var b5=0;b5<b6.length;b5++){var b7=b6[b5];b7.enumerable=b7.enumerable||false;b7.configurable=true;if("value" in b7){b7.writable=true}Object.defineProperty(b8,b7.key,b7)}}function a9(b7,b5,b6){if(b5){bN(b7.prototype,b5)}if(b6){bN(b7,b6)}return b7}function bi(b7,b5,b6){if(b5 in b7){Object.defineProperty(b7,b5,{value:b6,enumerable:true,configurable:true,writable:true})}else{b7[b5]=b6}return b7}function bI(b6,b7){var b8=Object.keys(b6);if(Object.getOwnPropertySymbols){var b5=Object.getOwnPropertySymbols(b6);if(b7){b5=b5.filter(function(b9){return Object.getOwnPropertyDescriptor(b6,b9).enumerable})}b8.push.apply(b8,b5)}return b8}function bZ(b7){for(var b5=1;b5<arguments.length;b5++){var b6=arguments[b5]!=null?arguments[b5]:{};if(b5%2){bI(b6,true).forEach(function(b8){bi(b7,b8,b6[b8])})}else{if(Object.getOwnPropertyDescriptors){Object.defineProperties(b7,Object.getOwnPropertyDescriptors(b6))}else{bI(b6).forEach(function(b8){Object.defineProperty(b7,b8,Object.getOwnPropertyDescriptor(b6,b8))})}}}return b7}function ap(b5){return aJ(b5)||ax(b5)||r()}function aJ(b5){if(Array.isArray(b5)){for(var b7=0,b6=new Array(b5.length);b7<b5.length;b7++){b6[b7]=b5[b7]}return b6}}function ax(b5){if(Symbol.iterator in Object(b5)||Object.prototype.toString.call(b5)==="[object Arguments]"){return Array.from(b5)}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var h=typeof window!=="undefined"&&typeof window.document!=="undefined";var ay=h?window:{};var Q=h?"ontouchstart" in ay.document.documentElement:false;var bz=h?"PointerEvent" in ay:false;var N="cropper";var ag="all";var be="crop";var bK="move";var G="zoom";var aA="e";var Y="w";var b="s";var bY="n";var a1="ne";var aF="nw";var e="se";var bM="sw";var bA="".concat(N,"-crop");var f="".concat(N,"-disabled");var g="".concat(N,"-hidden");var al="".concat(N,"-hide");var ak="".concat(N,"-invisible");var bo="".concat(N,"-modal");var b2="".concat(N,"-move");var bp="".concat(N,"Action");var a3="".concat(N,"Preview");var at="crop";var aQ="move";var av="none";var bP="crop";var a0="cropend";var bV="cropmove";var E="cropstart";var bR="dblclick";var bn=Q?"touchstart":"mousedown";var bh=Q?"touchmove":"mousemove";var J=Q?"touchend touchcancel":"mouseup";var bw=bz?"pointerdown":bn;var bG=bz?"pointermove":bh;var bS=bz?"pointerup pointercancel":J;var am="ready";var aB="resize";var aN="wheel";var ar="zoom";var aL="image/jpeg";var T=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;var ba=/^data:/;var bF=/^data:image\/jpeg;base64,/;var bb=/^img|canvas$/i;var D=200;var aI=100;var W={viewMode:0,dragMode:at,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:0.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:0.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};var an='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var aK=Number.isNaN||ay.isNaN;function ah(b5){return typeof b5==="number"&&!aK(b5)}var bC=function bC(b5){return b5>0&&b5<Infinity};function aR(b5){return typeof b5==="undefined"}function b1(b5){return H(b5)==="object"&&b5!==null}var K=Object.prototype.hasOwnProperty;function x(b7){if(!b1(b7)){return false}try{var b8=b7.constructor;var b6=b8.prototype;return b8&&b6&&K.call(b6,"isPrototypeOf")}catch(b5){return false}}function o(b5){return typeof b5==="function"}var C=Array.prototype.slice;function t(b5){return Array.from?Array.from(b5):C.call(b5)}function au(b5,b6){if(b5&&o(b6)){if(Array.isArray(b5)||ah(b5.length)){t(b5).forEach(function(b8,b7){b6.call(b5,b8,b7,b5)})}else{if(b1(b5)){Object.keys(b5).forEach(function(b7){b6.call(b5,b5[b7],b7,b5)})}}}return b5}var ai=Object.assign||function ai(b8){for(var b5=arguments.length,b6=new Array(b5>1?b5-1:0),b7=1;b7<b5;b7++){b6[b7-1]=arguments[b7]}if(b1(b8)&&b6.length>0){b6.forEach(function(b9){if(b1(b9)){Object.keys(b9).forEach(function(ca){b8[ca]=b9[ca]})}})}return b8};var bl=/\.\d*(?:0|9){12}\d*$/;function bq(b5){var b6=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100000000000;return bl.test(b5)?Math.round(b5*b6)/b6:b5}var i=/^width|height|left|top|marginLeft|marginTop$/;function U(b5,b7){var b6=b5.style;au(b7,function(b9,b8){if(i.test(b8)&&ah(b9)){b9="".concat(b9,"px")}b6[b8]=b9})}function A(b5,b6){return b5.classList?b5.classList.contains(b6):b5.className.indexOf(b6)>-1}function y(b5,b7){if(!b7){return}if(ah(b5.length)){au(b5,function(b8){y(b8,b7)});return}if(b5.classList){b5.classList.add(b7);return}var b6=b5.className.trim();if(!b6){b5.className=b7}else{if(b6.indexOf(b7)<0){b5.className="".concat(b6," ").concat(b7)}}}function a6(b5,b6){if(!b6){return}if(ah(b5.length)){au(b5,function(b7){a6(b7,b6)});return}if(b5.classList){b5.classList.remove(b6);return}if(b5.className.indexOf(b6)>=0){b5.className=b5.className.replace(b6,"")}}function a4(b5,b7,b6){if(!b7){return}if(ah(b5.length)){au(b5,function(b8){a4(b8,b7,b6)});return}if(b6){y(b5,b7)}else{a6(b5,b7)}}var v=/([a-z\d])([A-Z])/g;function aC(b5){return b5.replace(v,"$1-$2").toLowerCase()}function bg(b6,b5){if(b1(b6[b5])){return b6[b5]}if(b6.dataset){return b6.dataset[b5]}return b6.getAttribute("data-".concat(aC(b5)))}function aw(b6,b5,b7){if(b1(b7)){b6[b5]=b7}else{if(b6.dataset){b6.dataset[b5]=b7}else{b6.setAttribute("data-".concat(aC(b5)),b7)}}}function q(b7,b6){if(b1(b7[b6])){try{delete b7[b6]}catch(b5){b7[b6]=undefined}}else{if(b7.dataset){try{delete b7.dataset[b6]}catch(b5){b7.dataset[b6]=undefined}}else{b7.removeAttribute("data-".concat(aC(b6)))}}}var I=/\s\s*/;var aM=function(){var b5=false;if(h){var b8=false;var b9=function b9(){};var b7=Object.defineProperty({},"once",{get:function b6(){b5=true;return b8},set:function ca(cb){b8=cb}});ay.addEventListener("test",b9,b7);ay.removeEventListener("test",b9,b7)}return b5}();function k(b6,b8,b9){var b5=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var b7=b9;b8.trim().split(I).forEach(function(cb){if(!aM){var ca=b6.listeners;if(ca&&ca[cb]&&ca[cb][b9]){b7=ca[cb][b9];delete ca[cb][b9];if(Object.keys(ca[cb]).length===0){delete ca[cb]}if(Object.keys(ca).length===0){delete b6.listeners}}}b6.removeEventListener(cb,b7,b5)})}function bv(b7,b8,b9){var b6=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var b5=b9;b8.trim().split(I).forEach(function(cd){if(b6.once&&!aM){var ca=b7.listeners,cc=ca===void 0?{}:ca;b5=function cb(){delete cc[cd][b9];b7.removeEventListener(cd,b5,b6);for(var ce=arguments.length,cg=new Array(ce),cf=0;cf<ce;cf++){cg[cf]=arguments[cf]}b9.apply(b7,cg)};if(!cc[cd]){cc[cd]={}}if(cc[cd][b9]){b7.removeEventListener(cd,cc[cd][b9],b6)}cc[cd][b9]=b5;b7.listeners=cc}b7.addEventListener(cd,b5,b6)})}function aV(b5,b6,b8){var b7;if(o(Event)&&o(CustomEvent)){b7=new CustomEvent(b6,{detail:b8,bubbles:true,cancelable:true})}else{b7=document.createEvent("CustomEvent");b7.initCustomEvent(b6,true,true,b8)}return b5.dispatchEvent(b7)}function b0(b5){var b6=b5.getBoundingClientRect();return{left:b6.left+(window.pageXOffset-document.documentElement.clientLeft),top:b6.top+(window.pageYOffset-document.documentElement.clientTop)}}var aO=ay.location;var aS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function bk(b5){var b6=b5.match(aS);return b6!==null&&(b6[1]!==aO.protocol||b6[2]!==aO.hostname||b6[3]!==aO.port)}function bT(b5){var b6="timestamp=".concat(new Date().getTime());return b5+(b5.indexOf("?")===-1?"?":"&")+b6}function L(ca){var b9=ca.rotate,b8=ca.scaleX,b6=ca.scaleY,cc=ca.translateX,cb=ca.translateY;var b5=[];if(ah(cc)&&cc!==0){b5.push("translateX(".concat(cc,"px)"))}if(ah(cb)&&cb!==0){b5.push("translateY(".concat(cb,"px)"))}if(ah(b9)&&b9!==0){b5.push("rotate(".concat(b9,"deg)"))}if(ah(b8)&&b8!==1){b5.push("scaleX(".concat(b8,")"))}if(ah(b6)&&b6!==1){b5.push("scaleY(".concat(b6,")"))}var b7=b5.length?b5.join(" "):"none";return{WebkitTransform:b7,msTransform:b7,transform:b7}}function bf(b5){var b7=bZ({},b5);var b6=[];au(b5,function(b9,b8){delete b7[b8];au(b7,function(ca){var cc=Math.abs(b9.startX-ca.startX);var cf=Math.abs(b9.startY-ca.startY);var cb=Math.abs(b9.endX-ca.endX);var cd=Math.abs(b9.endY-ca.endY);var ch=Math.sqrt(cc*cc+cf*cf);var cg=Math.sqrt(cb*cb+cd*cd);var ce=(cg-ch)/ch;b6.push(ce)})});b6.sort(function(b9,b8){return Math.abs(b9)<Math.abs(b8)});return b6[0]}function aD(b9,b8){var b7=b9.pageX,b6=b9.pageY;var b5={endX:b7,endY:b6};return b8?b5:bZ({startX:b7,startY:b6},b5)}function bu(b5){var b7=0;var b6=0;var b8=0;au(b5,function(cb){var ca=cb.startX,b9=cb.startY;b7+=ca;b6+=b9;b8+=1});b7/=b8;b6/=b8;return{pageX:b7,pageY:b6}}function bx(cc){var b9=cc.aspectRatio,b5=cc.height,b8=cc.width;var b7=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"contain";var cb=bC(b8);var ca=bC(b5);if(cb&&ca){var b6=b5*b9;if(b7==="contain"&&b6>b8||b7==="cover"&&b6<b8){b5=b8/b9}else{b8=b5*b9}}else{if(cb){b5=b8/b9}else{if(ca){b8=b5*b9}}}return{width:b8,height:b5}}function bs(b8){var b6=b8.width,cd=b8.height,b9=b8.degree;b9=Math.abs(b9)%180;if(b9===90){return{width:cd,height:b6}}var b7=b9%90*Math.PI/180;var cb=Math.sin(b7);var cc=Math.cos(b7);var ca=b6*cc+cd*cb;var b5=b6*cb+cd*cc;return b9>90?{width:b5,height:ca}:{width:ca,height:b5}}function a7(b8,cd,cc,ca){var cp=cd.aspectRatio,cC=cd.naturalWidth,cx=cd.naturalHeight,cw=cd.rotate,cG=cw===void 0?0:cw,ck=cd.scaleX,cA=ck===void 0?1:ck,ci=cd.scaleY,cz=ci===void 0?1:ci;var cr=cc.aspectRatio,cb=cc.naturalWidth,ce=cc.naturalHeight;var cH=ca.fillColor,cJ=cH===void 0?"transparent":cH,cB=ca.imageSmoothingEnabled,ch=cB===void 0?true:cB,cs=ca.imageSmoothingQuality,cf=cs===void 0?"low":cs,cu=ca.maxWidth,cq=cu===void 0?Infinity:cu,cD=ca.maxHeight,cF=cD===void 0?Infinity:cD,cn=ca.minWidth,cg=cn===void 0?0:cn,cj=ca.minHeight,co=cj===void 0?0:cj;var b9=document.createElement("canvas");var cI=b9.getContext("2d");var cE=bx({aspectRatio:cr,width:cq,height:cF});var cy=bx({aspectRatio:cr,width:cg,height:co},"cover");var b5=Math.min(cE.width,Math.max(cy.width,cb));var b7=Math.min(cE.height,Math.max(cy.height,ce));var ct=bx({aspectRatio:cp,width:cq,height:cF});var cm=bx({aspectRatio:cp,width:cg,height:co},"cover");var cl=Math.min(ct.width,Math.max(cm.width,cC));var cv=Math.min(ct.height,Math.max(cm.height,cx));var b6=[-cl/2,-cv/2,cl,cv];b9.width=bq(b5);b9.height=bq(b7);cI.fillStyle=cJ;cI.fillRect(0,0,b5,b7);cI.save();cI.translate(b5/2,b7/2);cI.rotate(cG*Math.PI/180);cI.scale(cA,cz);cI.imageSmoothingEnabled=ch;cI.imageSmoothingQuality=cf;cI.drawImage.apply(cI,[b8].concat(ap(b6.map(function(cK){return Math.floor(bq(cK))}))));cI.restore();return b9}var s=String.fromCharCode;function P(b8,b9,b6){var b7="";b6+=b9;for(var b5=b9;b5<b6;b5+=1){b7+=s(b8.getUint8(b5))}return b7}var ac=/^data:.*,/;function aH(b8){var b6=b8.replace(ac,"");var b9=atob(b6);var b7=new ArrayBuffer(b9.length);var b5=new Uint8Array(b7);au(b5,function(cb,ca){b5[ca]=b9.charCodeAt(ca)});return b7}function ab(b6,b7){var b9=[];var b8=8192;var b5=new Uint8Array(b6);while(b5.length>0){b9.push(s.apply(null,t(b5.subarray(0,b8))));b5=b5.subarray(b8)}return"data:".concat(b7,";base64,").concat(btoa(b9.join("")))}function z(cc){var ch=new DataView(cc);var b7;try{var b6;var cb;var ck;if(ch.getUint8(0)===255&&ch.getUint8(1)===216){var b8=ch.byteLength;var b9=2;while(b9+1<b8){if(ch.getUint8(b9)===255&&ch.getUint8(b9+1)===225){cb=b9;break}b9+=1}}if(cb){var cj=cb+4;var cg=cb+10;if(P(ch,cj,4)==="Exif"){var ce=ch.getUint16(cg);b6=ce===18761;if(b6||ce===19789){if(ch.getUint16(cg+2,b6)===42){var b5=ch.getUint32(cg+4,b6);if(b5>=8){ck=cg+b5}}}}}if(ck){var cd=ch.getUint16(ck,b6);var ci;var ca;for(ca=0;ca<cd;ca+=1){ci=ck+ca*12+2;if(ch.getUint16(ci,b6)===274){ci+=8;b7=ch.getUint16(ci,b6);ch.setUint16(ci,1,b6);break}}}}catch(cf){b7=1}return b7}function l(b6){var b8=0;var b7=1;var b5=1;switch(b6){case 2:b7=-1;break;case 3:b8=-180;break;case 4:b5=-1;break;case 5:b8=90;b5=-1;break;case 6:b8=90;break;case 7:b8=90;b7=-1;break;case 8:b8=-90;break;default:}return{rotate:b8,scaleX:b7,scaleY:b5}}var Z={render:function Z(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.cropped){this.renderCropBox()}},initContainer:function br(){var b8=this.element,b7=this.options,b6=this.container,b9=this.cropper;y(b9,g);a6(b8,g);var b5={width:Math.max(b6.offsetWidth,Number(b7.minContainerWidth)||200),height:Math.max(b6.offsetHeight,Number(b7.minContainerHeight)||100)};this.containerData=b5;U(b9,{width:b5.width,height:b5.height});y(b8,g);a6(b9,g)},initCanvas:function bt(){var cc=this.containerData,b5=this.imageData;var b7=this.options.viewMode;var b6=Math.abs(b5.rotate)%180===90;var cb=b6?b5.naturalHeight:b5.naturalWidth;var cd=b6?b5.naturalWidth:b5.naturalHeight;var ce=cb/cd;var b8=cc.width;var ca=cc.height;if(cc.height*ce>cc.width){if(b7===3){b8=cc.height*ce}else{ca=cc.width/ce}}else{if(b7===3){ca=cc.width/ce}else{b8=cc.height*ce}}var b9={aspectRatio:ce,naturalWidth:cb,naturalHeight:cd,width:b8,height:ca};b9.left=(cc.width-b8)/2;b9.top=(cc.height-ca)/2;b9.oldLeft=b9.left;b9.oldTop=b9.top;this.canvasData=b9;this.limited=b7===1||b7===2;this.limitCanvas(true,true);this.initialImageData=ai({},b5);this.initialCanvasData=ai({},b9)},limitCanvas:function bm(b5,ca){var ci=this.options,cc=this.containerData,cb=this.canvasData,b8=this.cropBoxData;var b9=ci.viewMode;var cg=cb.aspectRatio;var cf=this.cropped&&b8;if(b5){var ch=Number(ci.minCanvasWidth)||0;var cd=Number(ci.minCanvasHeight)||0;if(b9>1){ch=Math.max(ch,cc.width);cd=Math.max(cd,cc.height);if(b9===3){if(cd*cg>ch){ch=cd*cg}else{cd=ch/cg}}}else{if(b9>0){if(ch){ch=Math.max(ch,cf?b8.width:0)}else{if(cd){cd=Math.max(cd,cf?b8.height:0)}else{if(cf){ch=b8.width;cd=b8.height;if(cd*cg>ch){ch=cd*cg}else{cd=ch/cg}}}}}}var b6=bx({aspectRatio:cg,width:ch,height:cd});ch=b6.width;cd=b6.height;cb.minWidth=ch;cb.minHeight=cd;cb.maxWidth=Infinity;cb.maxHeight=Infinity}if(ca){if(b9>(cf?0:1)){var b7=cc.width-cb.width;var ce=cc.height-cb.height;cb.minLeft=Math.min(0,b7);cb.minTop=Math.min(0,ce);cb.maxLeft=Math.max(0,b7);cb.maxTop=Math.max(0,ce);if(cf&&this.limited){cb.minLeft=Math.min(b8.left,b8.left+(b8.width-cb.width));cb.minTop=Math.min(b8.top,b8.top+(b8.height-cb.height));cb.maxLeft=b8.left;cb.maxTop=b8.top;if(b9===2){if(cb.width>=cc.width){cb.minLeft=Math.min(0,b7);cb.maxLeft=Math.max(0,b7)}if(cb.height>=cc.height){cb.minTop=Math.min(0,ce);cb.maxTop=Math.max(0,ce)}}}}else{cb.minLeft=-cb.width;cb.minTop=-cb.height;cb.maxLeft=cc.width;cb.maxTop=cc.height}}},renderCanvas:function bH(ca,b8){var b9=this.canvasData,b5=this.imageData;if(b8){var b7=bs({width:b5.naturalWidth*Math.abs(b5.scaleX||1),height:b5.naturalHeight*Math.abs(b5.scaleY||1),degree:b5.rotate||0}),cb=b7.width,cc=b7.height;var b6=b9.width*(cb/b9.naturalWidth);var cd=b9.height*(cc/b9.naturalHeight);b9.left-=(b6-b9.width)/2;b9.top-=(cd-b9.height)/2;b9.width=b6;b9.height=cd;b9.aspectRatio=cb/cc;b9.naturalWidth=cb;b9.naturalHeight=cc;this.limitCanvas(true,false)}if(b9.width>b9.maxWidth||b9.width<b9.minWidth){b9.left=b9.oldLeft}if(b9.height>b9.maxHeight||b9.height<b9.minHeight){b9.top=b9.oldTop}b9.width=Math.min(Math.max(b9.width,b9.minWidth),b9.maxWidth);b9.height=Math.min(Math.max(b9.height,b9.minHeight),b9.maxHeight);this.limitCanvas(false,true);b9.left=Math.min(Math.max(b9.left,b9.minLeft),b9.maxLeft);b9.top=Math.min(Math.max(b9.top,b9.minTop),b9.maxTop);b9.oldLeft=b9.left;b9.oldTop=b9.top;U(this.canvas,ai({width:b9.width,height:b9.height},L({translateX:b9.left,translateY:b9.top})));this.renderImage(ca);if(this.cropped&&this.limited){this.limitCropBox(true,true)}},renderImage:function bJ(b8){var b6=this.canvasData,b9=this.imageData;var b7=b9.naturalWidth*(b6.width/b6.naturalWidth);var b5=b9.naturalHeight*(b6.height/b6.naturalHeight);ai(b9,{width:b7,height:b5,left:(b6.width-b7)/2,top:(b6.height-b5)/2});U(this.image,ai({width:b9.width,height:b9.height},L(ai({translateX:b9.left,translateY:b9.top},b9))));if(b8){this.output()}},initCropBox:function d(){var b6=this.options,b5=this.canvasData;var b7=b6.aspectRatio||b6.initialAspectRatio;var b9=Number(b6.autoCropArea)||0.8;var b8={width:b5.width,height:b5.height};if(b7){if(b5.height*b7>b5.width){b8.height=b8.width/b7}else{b8.width=b8.height*b7}}this.cropBoxData=b8;this.limitCropBox(true,true);b8.width=Math.min(Math.max(b8.width,b8.minWidth),b8.maxWidth);b8.height=Math.min(Math.max(b8.height,b8.minHeight),b8.maxHeight);b8.width=Math.max(b8.minWidth,b8.width*b9);b8.height=Math.max(b8.minHeight,b8.height*b9);b8.left=b5.left+(b5.width-b8.width)/2;b8.top=b5.top+(b5.height-b8.height)/2;b8.oldLeft=b8.left;b8.oldTop=b8.top;this.initialCropBoxData=ai({},b8)},limitCropBox:function bE(b5,b8){var cg=this.options,ca=this.containerData,b9=this.canvasData,b7=this.cropBoxData,cd=this.limited;var cf=cg.aspectRatio;if(b5){var b6=Number(cg.minCropBoxWidth)||0;var cb=Number(cg.minCropBoxHeight)||0;var cc=cd?Math.min(ca.width,b9.width,b9.width+b9.left,ca.width-b9.left):ca.width;var ce=cd?Math.min(ca.height,b9.height,b9.height+b9.top,ca.height-b9.top):ca.height;b6=Math.min(b6,ca.width);cb=Math.min(cb,ca.height);if(cf){if(b6&&cb){if(cb*cf>b6){cb=b6/cf}else{b6=cb*cf}}else{if(b6){cb=b6/cf}else{if(cb){b6=cb*cf}}}if(ce*cf>cc){ce=cc/cf}else{cc=ce*cf}}b7.minWidth=Math.min(b6,cc);b7.minHeight=Math.min(cb,ce);b7.maxWidth=cc;b7.maxHeight=ce}if(b8){if(cd){b7.minLeft=Math.max(0,b9.left);b7.minTop=Math.max(0,b9.top);b7.maxLeft=Math.min(ca.width,b9.left+b9.width)-b7.width;b7.maxTop=Math.min(ca.height,b9.top+b9.height)-b7.height}else{b7.minLeft=0;b7.minTop=0;b7.maxLeft=ca.width-b7.width;b7.maxTop=ca.height-b7.height}}},renderCropBox:function O(){var b6=this.options,b5=this.containerData,b7=this.cropBoxData;if(b7.width>b7.maxWidth||b7.width<b7.minWidth){b7.left=b7.oldLeft}if(b7.height>b7.maxHeight||b7.height<b7.minHeight){b7.top=b7.oldTop}b7.width=Math.min(Math.max(b7.width,b7.minWidth),b7.maxWidth);b7.height=Math.min(Math.max(b7.height,b7.minHeight),b7.maxHeight);this.limitCropBox(false,true);b7.left=Math.min(Math.max(b7.left,b7.minLeft),b7.maxLeft);b7.top=Math.min(Math.max(b7.top,b7.minTop),b7.maxTop);b7.oldLeft=b7.left;b7.oldTop=b7.top;if(b6.movable&&b6.cropBoxMovable){aw(this.face,bp,b7.width>=b5.width&&b7.height>=b5.height?bK:ag)}U(this.cropBox,ai({width:b7.width,height:b7.height},L({translateX:b7.left,translateY:b7.top})));if(this.cropped&&this.limited){this.limitCanvas(true,true)}if(!this.disabled){this.output()}},output:function bW(){this.preview();aV(this.element,bP,this.getData())}};var a={initPreview:function bD(){var b7=this.element,b5=this.crossOrigin;var cb=this.options.preview;var b6=b5?this.crossOriginUrl:this.url;var ca=b7.alt||"The image to preview";var b9=document.createElement("img");if(b5){b9.crossOrigin=b5}b9.src=b6;b9.alt=ca;this.viewBox.appendChild(b9);this.viewBoxImage=b9;if(!cb){return}var b8=cb;if(typeof cb==="string"){b8=b7.ownerDocument.querySelectorAll(cb)}else{if(cb.querySelector){b8=[cb]}}this.previews=b8;au(b8,function(cd){var cc=document.createElement("img");aw(cd,a3,{width:cd.offsetWidth,height:cd.offsetHeight,html:cd.innerHTML});if(b5){cc.crossOrigin=b5}cc.src=b6;cc.alt=ca;cc.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';cd.innerHTML="";cd.appendChild(cc)})},resetPreview:function b4(){au(this.previews,function(b5){var b6=bg(b5,a3);U(b5,{width:b6.width,height:b6.height});b5.innerHTML=b6.html;q(b5,a3)})},preview:function a(){var b5=this.imageData,ca=this.canvasData,b8=this.cropBoxData;var b6=b8.width,cb=b8.height;var b7=b5.width,cd=b5.height;var b9=b8.left-ca.left-b5.left;var cc=b8.top-ca.top-b5.top;if(!this.cropped||this.disabled){return}U(this.viewBoxImage,ai({width:b7,height:cd},L(ai({translateX:-b9,translateY:-cc},b5))));au(this.previews,function(cf){var cj=bg(cf,a3);var ck=cj.width;var ci=cj.height;var ch=ck;var ce=ci;var cg=1;if(b6){cg=ck/b6;ce=cb*cg}if(cb&&ce>ci){cg=ci/cb;ch=b6*cg;ce=ci}U(cf,{width:ch,height:ce});U(cf.getElementsByTagName("img")[0],ai({width:b7*cg,height:cd*cg},L(ai({translateX:-b9*cg,translateY:-cc*cg},b5))))})}};var bU={bind:function aU(){var b6=this.element,b5=this.options,b7=this.cropper;if(o(b5.cropstart)){bv(b6,E,b5.cropstart)}if(o(b5.cropmove)){bv(b6,bV,b5.cropmove)}if(o(b5.cropend)){bv(b6,a0,b5.cropend)}if(o(b5.crop)){bv(b6,bP,b5.crop)}if(o(b5.zoom)){bv(b6,ar,b5.zoom)}bv(b7,bw,this.onCropStart=this.cropStart.bind(this));if(b5.zoomable&&b5.zoomOnWheel){bv(b7,aN,this.onWheel=this.wheel.bind(this),{passive:false,capture:true})}if(b5.toggleDragModeOnDblclick){bv(b7,bR,this.onDblclick=this.dblclick.bind(this))}bv(b6.ownerDocument,bG,this.onCropMove=this.cropMove.bind(this));bv(b6.ownerDocument,bS,this.onCropEnd=this.cropEnd.bind(this));if(b5.responsive){bv(window,aB,this.onResize=this.resize.bind(this))}},unbind:function bj(){var b6=this.element,b5=this.options,b7=this.cropper;if(o(b5.cropstart)){k(b6,E,b5.cropstart)}if(o(b5.cropmove)){k(b6,bV,b5.cropmove)}if(o(b5.cropend)){k(b6,a0,b5.cropend)}if(o(b5.crop)){k(b6,bP,b5.crop)}if(o(b5.zoom)){k(b6,ar,b5.zoom)}k(b7,bw,this.onCropStart);if(b5.zoomable&&b5.zoomOnWheel){k(b7,aN,this.onWheel,{passive:false,capture:true})}if(b5.toggleDragModeOnDblclick){k(b7,bR,this.onDblclick)}k(b6.ownerDocument,bG,this.onCropMove);k(b6.ownerDocument,bS,this.onCropEnd);if(b5.responsive){k(window,aB,this.onResize)}}};var a5={resize:function B(){var b9=this.options,b6=this.container,b5=this.containerData;var cc=Number(b9.minContainerWidth)||D;var b7=Number(b9.minContainerHeight)||aI;if(this.disabled||b5.width<=cc||b5.height<=b7){return}var ca=b6.offsetWidth/b5.width;if(ca!==1||b6.offsetHeight!==b5.height){var b8;var cb;if(b9.restore){b8=this.getCanvasData();cb=this.getCropBoxData()}this.render();if(b9.restore){this.setCanvasData(au(b8,function(ce,cd){b8[cd]=ce*ca}));this.setCropBoxData(au(cb,function(ce,cd){cb[cd]=ce*ca}))}}},dblclick:function aj(){if(this.disabled||this.options.dragMode===av){return}this.setDragMode(A(this.dragBox,bA)?aQ:at)},wheel:function m(b6){var b8=this;var b5=Number(this.options.wheelZoomRatio)||0.1;var b7=1;if(this.disabled){return}b6.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(function(){b8.wheeling=false},50);if(b6.deltaY){b7=b6.deltaY>0?1:-1}else{if(b6.wheelDelta){b7=-b6.wheelDelta/120}else{if(b6.detail){b7=b6.detail>0?1:-1}}}this.zoom(-b7*b5,b6)},cropStart:function bd(b9){var b8=b9.buttons,b7=b9.button;if(this.disabled||(b9.type==="mousedown"||b9.type==="pointerdown"&&b9.pointerType==="mouse")&&(ah(b8)&&b8!==1||ah(b7)&&b7!==0||b9.ctrlKey)){return}var b6=this.options,b5=this.pointers;var ca;if(b9.changedTouches){au(b9.changedTouches,function(cb){b5[cb.identifier]=aD(cb)})}else{b5[b9.pointerId||0]=aD(b9)}if(Object.keys(b5).length>1&&b6.zoomable&&b6.zoomOnTouch){ca=G}else{ca=bg(b9.target,bp)}if(!T.test(ca)){return}if(aV(this.element,E,{originalEvent:b9,action:ca})===false){return}b9.preventDefault();this.action=ca;this.cropping=false;if(ca===be){this.cropping=true;y(this.dragBox,bo)}},cropMove:function aY(b6){var b7=this.action;if(this.disabled||!b7){return}var b5=this.pointers;b6.preventDefault();if(aV(this.element,bV,{originalEvent:b6,action:b7})===false){return}if(b6.changedTouches){au(b6.changedTouches,function(b8){ai(b5[b8.identifier]||{},aD(b8,true))})}else{ai(b5[b6.pointerId||0]||{},aD(b6,true))}this.change(b6)},cropEnd:function by(b6){if(this.disabled){return}var b7=this.action,b5=this.pointers;if(b6.changedTouches){au(b6.changedTouches,function(b8){delete b5[b8.identifier]})}else{delete b5[b6.pointerId||0]}if(!b7){return}b6.preventDefault();if(!Object.keys(b5).length){this.action=""}if(this.cropping){this.cropping=false;a4(this.dragBox,bo,this.cropped&&this.options.modal)}aV(this.element,a0,{originalEvent:b6,action:b7})}};var aP={change:function aP(co){var b7=this.options,cd=this.canvasData,b6=this.containerData,ci=this.cropBoxData,cc=this.pointers;var cn=this.action;var b5=b7.aspectRatio;var b8=ci.left,cf=ci.top,cl=ci.width,cg=ci.height;var cr=b8+cl;var ca=cf+cg;var ch=0;var cb=0;var cp=b6.width;var ck=b6.height;var cj=true;var b9;if(!b5&&co.shiftKey){b5=cl&&cg?cl/cg:1}if(this.limited){ch=ci.minLeft;cb=ci.minTop;cp=ch+Math.min(b6.width,cd.width,cd.left+cd.width);ck=cb+Math.min(b6.height,cd.height,cd.top+cd.height)}var cm=cc[Object.keys(cc)[0]];var ce={x:cm.endX-cm.startX,y:cm.endY-cm.startY};var cq=function cq(cs){switch(cs){case aA:if(cr+ce.x>cp){ce.x=cp-cr}break;case Y:if(b8+ce.x<ch){ce.x=ch-b8}break;case bY:if(cf+ce.y<cb){ce.y=cb-cf}break;case b:if(ca+ce.y>ck){ce.y=ck-ca}break;default:}};switch(cn){case ag:b8+=ce.x;cf+=ce.y;break;case aA:if(ce.x>=0&&(cr>=cp||b5&&(cf<=cb||ca>=ck))){cj=false;break}cq(aA);cl+=ce.x;if(cl<0){cn=Y;cl=-cl;b8-=cl}if(b5){cg=cl/b5;cf+=(ci.height-cg)/2}break;case bY:if(ce.y<=0&&(cf<=cb||b5&&(b8<=ch||cr>=cp))){cj=false;break}cq(bY);cg-=ce.y;cf+=ce.y;if(cg<0){cn=b;cg=-cg;cf-=cg}if(b5){cl=cg*b5;b8+=(ci.width-cl)/2}break;case Y:if(ce.x<=0&&(b8<=ch||b5&&(cf<=cb||ca>=ck))){cj=false;break}cq(Y);cl-=ce.x;b8+=ce.x;if(cl<0){cn=aA;cl=-cl;b8-=cl}if(b5){cg=cl/b5;cf+=(ci.height-cg)/2}break;case b:if(ce.y>=0&&(ca>=ck||b5&&(b8<=ch||cr>=cp))){cj=false;break}cq(b);cg+=ce.y;if(cg<0){cn=bY;cg=-cg;cf-=cg}if(b5){cl=cg*b5;b8+=(ci.width-cl)/2}break;case a1:if(b5){if(ce.y<=0&&(cf<=cb||cr>=cp)){cj=false;break}cq(bY);cg-=ce.y;cf+=ce.y;cl=cg*b5}else{cq(bY);cq(aA);if(ce.x>=0){if(cr<cp){cl+=ce.x}else{if(ce.y<=0&&cf<=cb){cj=false}}}else{cl+=ce.x}if(ce.y<=0){if(cf>cb){cg-=ce.y;cf+=ce.y}}else{cg-=ce.y;cf+=ce.y}}if(cl<0&&cg<0){cn=bM;cg=-cg;cl=-cl;cf-=cg;b8-=cl}else{if(cl<0){cn=aF;cl=-cl;b8-=cl}else{if(cg<0){cn=e;cg=-cg;cf-=cg}}}break;case aF:if(b5){if(ce.y<=0&&(cf<=cb||b8<=ch)){cj=false;break}cq(bY);cg-=ce.y;cf+=ce.y;cl=cg*b5;b8+=ci.width-cl}else{cq(bY);cq(Y);if(ce.x<=0){if(b8>ch){cl-=ce.x;b8+=ce.x}else{if(ce.y<=0&&cf<=cb){cj=false}}}else{cl-=ce.x;b8+=ce.x}if(ce.y<=0){if(cf>cb){cg-=ce.y;cf+=ce.y}}else{cg-=ce.y;cf+=ce.y}}if(cl<0&&cg<0){cn=e;cg=-cg;cl=-cl;cf-=cg;b8-=cl}else{if(cl<0){cn=a1;cl=-cl;b8-=cl}else{if(cg<0){cn=bM;cg=-cg;cf-=cg}}}break;case bM:if(b5){if(ce.x<=0&&(b8<=ch||ca>=ck)){cj=false;break}cq(Y);cl-=ce.x;b8+=ce.x;cg=cl/b5}else{cq(b);cq(Y);if(ce.x<=0){if(b8>ch){cl-=ce.x;b8+=ce.x}else{if(ce.y>=0&&ca>=ck){cj=false}}}else{cl-=ce.x;b8+=ce.x}if(ce.y>=0){if(ca<ck){cg+=ce.y}}else{cg+=ce.y}}if(cl<0&&cg<0){cn=a1;cg=-cg;cl=-cl;cf-=cg;b8-=cl}else{if(cl<0){cn=e;cl=-cl;b8-=cl}else{if(cg<0){cn=aF;cg=-cg;cf-=cg}}}break;case e:if(b5){if(ce.x>=0&&(cr>=cp||ca>=ck)){cj=false;break}cq(aA);cl+=ce.x;cg=cl/b5}else{cq(b);cq(aA);if(ce.x>=0){if(cr<cp){cl+=ce.x}else{if(ce.y>=0&&ca>=ck){cj=false}}}else{cl+=ce.x}if(ce.y>=0){if(ca<ck){cg+=ce.y}}else{cg+=ce.y}}if(cl<0&&cg<0){cn=aF;cg=-cg;cl=-cl;cf-=cg;b8-=cl}else{if(cl<0){cn=bM;cl=-cl;b8-=cl}else{if(cg<0){cn=a1;cg=-cg;cf-=cg}}}break;case bK:this.move(ce.x,ce.y);cj=false;break;case G:this.zoom(bf(cc),co);cj=false;break;case be:if(!ce.x||!ce.y){cj=false;break}b9=b0(this.cropper);b8=cm.startX-b9.left;cf=cm.startY-b9.top;cl=ci.minWidth;cg=ci.minHeight;if(ce.x>0){cn=ce.y>0?e:a1}else{if(ce.x<0){b8-=cl;cn=ce.y>0?bM:aF}}if(ce.y<0){cf-=cg}if(!this.cropped){a6(this.cropBox,g);this.cropped=true;if(this.limited){this.limitCropBox(true,true)}}break;default:}if(cj){ci.width=cl;ci.height=cg;ci.left=b8;ci.top=cf;this.action=cn;this.renderCropBox()}au(cc,function(cs){cs.startX=cs.endX;cs.startY=cs.endY})}};var az={crop:function p(){if(this.ready&&!this.cropped&&!this.disabled){this.cropped=true;this.limitCropBox(true,true);if(this.options.modal){y(this.dragBox,bo)}a6(this.cropBox,g);this.setCropBoxData(this.initialCropBoxData)}return this},reset:function bc(){if(this.ready&&!this.disabled){this.imageData=ai({},this.initialImageData);this.canvasData=ai({},this.initialCanvasData);this.cropBoxData=ai({},this.initialCropBoxData);this.renderCanvas();if(this.cropped){this.renderCropBox()}}return this},clear:function bO(){if(this.cropped&&!this.disabled){ai(this.cropBoxData,{left:0,top:0,width:0,height:0});this.cropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();a6(this.dragBox,bo);y(this.cropBox,g)}return this},replace:function aX(b6){var b5=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.disabled&&b6){if(this.isImg){this.element.src=b6}if(b5){this.url=b6;this.image.src=b6;if(this.ready){this.viewBoxImage.src=b6;au(this.previews,function(b7){b7.getElementsByTagName("img")[0].src=b6})}}else{if(this.isImg){this.replaced=true}this.options.data=null;this.uncreate();this.load(b6)}}return this},enable:function n(){if(this.ready&&this.disabled){this.disabled=false;a6(this.cropper,f)}return this},disable:function aG(){if(this.ready&&!this.disabled){this.disabled=true;y(this.cropper,f)}return this},destroy:function u(){var b5=this.element;if(!b5[N]){return this}b5[N]=undefined;if(this.isImg&&this.replaced){b5.src=this.originalUrl}this.uncreate();return this},move:function M(b5){var b9=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b5;var b6=this.canvasData,b8=b6.left,b7=b6.top;return this.moveTo(aR(b5)?b5:b8+Number(b5),aR(b9)?b9:b7+Number(b9))},moveTo:function bB(b5){var b8=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b5;var b6=this.canvasData;var b7=false;b5=Number(b5);b8=Number(b8);if(this.ready&&!this.disabled&&this.options.movable){if(ah(b5)){b6.left=b5;b7=true}if(ah(b8)){b6.top=b8;b7=true}if(b7){this.renderCanvas(true)}}return this},zoom:function a2(b7,b5){var b6=this.canvasData;b7=Number(b7);if(b7<0){b7=1/(1-b7)}else{b7=1+b7}return this.zoomTo(b6.width*b7/b6.naturalWidth,null,b5)},zoomTo:function aW(cc,cg,cd){var ci=this.options,b9=this.canvasData;var b7=b9.width,ch=b9.height,cb=b9.naturalWidth,ce=b9.naturalHeight;cc=Number(cc);if(cc>=0&&this.ready&&!this.disabled&&ci.zoomable){var ca=cb*cc;var b6=ce*cc;if(aV(this.element,ar,{ratio:cc,oldRatio:b7/cb,originalEvent:cd})===false){return this}if(cd){var cf=this.pointers;var b8=b0(this.cropper);var b5=cf&&Object.keys(cf).length?bu(cf):{pageX:cd.pageX,pageY:cd.pageY};b9.left-=(ca-b7)*((b5.pageX-b8.left-b9.left)/b7);b9.top-=(b6-ch)*((b5.pageY-b8.top-b9.top)/ch)}else{if(x(cg)&&ah(cg.x)&&ah(cg.y)){b9.left-=(ca-b7)*((cg.x-b9.left)/b7);b9.top-=(b6-ch)*((cg.y-b9.top)/ch)}else{b9.left-=(ca-b7)/2;b9.top-=(b6-ch)/2}}b9.width=ca;b9.height=b6;this.renderCanvas(true)}return this},rotate:function w(b5){return this.rotateTo((this.imageData.rotate||0)+Number(b5))},rotateTo:function b3(b5){b5=Number(b5);if(ah(b5)&&this.ready&&!this.disabled&&this.options.rotatable){this.imageData.rotate=b5%360;this.renderCanvas(true,true)}return this},scaleX:function X(b6){var b5=this.imageData.scaleY;return this.scale(b6,ah(b5)?b5:1)},scaleY:function V(b6){var b5=this.imageData.scaleX;return this.scale(ah(b5)?b5:1,b6)},scale:function aZ(b7){var b5=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b7;var b8=this.imageData;var b6=false;b7=Number(b7);b5=Number(b5);if(this.ready&&!this.disabled&&this.options.scalable){if(ah(b7)){b8.scaleX=b7;b6=true}if(ah(b5)){b8.scaleY=b5;b6=true}if(b6){this.renderCanvas(true,true)}}return this},getData:function bg(){var b8=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var cd=this.options,b5=this.imageData,b9=this.canvasData,b7=this.cropBoxData;var ca;if(this.ready&&this.cropped){ca={x:b7.left-b9.left,y:b7.top-b9.top,width:b7.width,height:b7.height};var cb=b5.width/b5.naturalWidth;au(ca,function(cf,ce){ca[ce]=cf/cb});if(b8){var b6=Math.round(ca.y+ca.height);var cc=Math.round(ca.x+ca.width);ca.x=Math.round(ca.x);ca.y=Math.round(ca.y);ca.width=cc-ca.x;ca.height=b6-ca.y}}else{ca={x:0,y:0,width:0,height:0}}if(cd.rotatable){ca.rotate=b5.rotate||0}if(cd.scalable){ca.scaleX=b5.scaleX||1;ca.scaleY=b5.scaleY||1}return ca},setData:function aw(ca){var b7=this.options,cb=this.imageData,b6=this.canvasData;var b9={};if(this.ready&&!this.disabled&&x(ca)){var b5=false;if(b7.rotatable){if(ah(ca.rotate)&&ca.rotate!==cb.rotate){cb.rotate=ca.rotate;b5=true}}if(b7.scalable){if(ah(ca.scaleX)&&ca.scaleX!==cb.scaleX){cb.scaleX=ca.scaleX;b5=true}if(ah(ca.scaleY)&&ca.scaleY!==cb.scaleY){cb.scaleY=ca.scaleY;b5=true}}if(b5){this.renderCanvas(true,true)}var b8=cb.width/cb.naturalWidth;if(ah(ca.x)){b9.left=ca.x*b8+b6.left}if(ah(ca.y)){b9.top=ca.y*b8+b6.top}if(ah(ca.width)){b9.width=ca.width*b8}if(ah(ca.height)){b9.height=ca.height*b8}this.setCropBoxData(b9)}return this},getContainerData:function a8(){return this.ready?ai({},this.containerData):{}},getImageData:function af(){return this.sized?ai({},this.imageData):{}},getCanvasData:function aa(){var b5=this.canvasData;var b6={};if(this.ready){au(["left","top","width","height","naturalWidth","naturalHeight"],function(b7){b6[b7]=b5[b7]})}return b6},setCanvasData:function c(b7){var b5=this.canvasData;var b6=b5.aspectRatio;if(this.ready&&!this.disabled&&x(b7)){if(ah(b7.left)){b5.left=b7.left}if(ah(b7.top)){b5.top=b7.top}if(ah(b7.width)){b5.width=b7.width;b5.height=b7.width/b6}else{if(ah(b7.height)){b5.height=b7.height;b5.width=b7.height*b6}}this.renderCanvas(true)}return this},getCropBoxData:function ao(){var b6=this.cropBoxData;var b5;if(this.ready&&this.cropped){b5={left:b6.left,top:b6.top,width:b6.width,height:b6.height}}return b5||{}},setCropBoxData:function aT(b9){var b8=this.cropBoxData;var b6=this.options.aspectRatio;var b7;var b5;if(this.ready&&this.cropped&&!this.disabled&&x(b9)){if(ah(b9.left)){b8.left=b9.left}if(ah(b9.top)){b8.top=b9.top}if(ah(b9.width)&&b9.width!==b8.width){b7=true;b8.width=b9.width}if(ah(b9.height)&&b9.height!==b8.height){b5=true;b8.height=b9.height}if(b6){if(b7){b8.height=b8.width/b6}else{if(b5){b8.width=b8.height*b6}}}this.renderCropBox()}return this},getCroppedCanvas:function aq(){var cf=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement){return null}var cl=this.canvasData;var cr=a7(this.image,this.imageData,cl,cf);if(!this.cropped){return cr}var ck=this.getData(),cy=ck.x,cx=ck.y,ch=ck.width,ct=ck.height;var cj=cr.width/Math.floor(cl.naturalWidth);if(cj!==1){cy*=cj;cx*=cj;ch*=cj;ct*=cj}var b7=ch/ct;var cg=bx({aspectRatio:b7,width:cf.maxWidth||Infinity,height:cf.maxHeight||Infinity});var cw=bx({aspectRatio:b7,width:cf.minWidth||0,height:cf.minHeight||0},"cover");var ci=bx({aspectRatio:b7,width:cf.width||(cj!==1?cr.width:ch),height:cf.height||(cj!==1?cr.height:ct)}),cq=ci.width,cp=ci.height;cq=Math.min(cg.width,Math.max(cw.width,cq));cp=Math.min(cg.height,Math.max(cw.height,cp));var ce=document.createElement("canvas");var ca=ce.getContext("2d");ce.width=bq(cq);ce.height=bq(cp);ca.fillStyle=cf.fillColor||"transparent";ca.fillRect(0,0,cq,cp);var cs=cf.imageSmoothingEnabled,b6=cs===void 0?true:cs,cc=cf.imageSmoothingQuality;ca.imageSmoothingEnabled=b6;if(cc){ca.imageSmoothingQuality=cc}var cm=cr.width;var cb=cr.height;var b5=cy;var cA=cx;var co;var cv;var b9;var b8;var cd;var cn;if(b5<=-ch||b5>cm){b5=0;co=0;b9=0;cd=0}else{if(b5<=0){b9=-b5;b5=0;co=Math.min(cm,ch+b5);cd=co}else{if(b5<=cm){b9=0;co=Math.min(ch,cm-b5);cd=co}}}if(co<=0||cA<=-ct||cA>cb){cA=0;cv=0;b8=0;cn=0}else{if(cA<=0){b8=-cA;cA=0;cv=Math.min(cb,ct+cA);cn=cv}else{if(cA<=cb){b8=0;cv=Math.min(ct,cb-cA);cn=cv}}}var cu=[b5,cA,co,cv];if(cd>0&&cn>0){var cz=cq/ch;cu.push(b9*cz,b8*cz,cd*cz,cn*cz)}ca.drawImage.apply(ca,[cr].concat(ap(cu.map(function(cB){return Math.floor(bq(cB))}))));return ce},setAspectRatio:function F(b6){var b5=this.options;if(!this.disabled&&!aR(b6)){b5.aspectRatio=Math.max(0,b6)||NaN;if(this.ready){this.initCropBox();if(this.cropped){this.renderCropBox()}}}return this},setDragMode:function ae(ca){var b5=this.options,b6=this.dragBox,b7=this.face;if(this.ready&&!this.disabled){var b9=ca===at;var b8=b5.movable&&ca===aQ;ca=b9||b8?ca:av;b5.dragMode=ca;aw(b6,bp,ca);a4(b6,bA,b9);a4(b6,b2,b8);if(!b5.cropBoxMovable){aw(b7,bp,ca);a4(b7,bA,b9);a4(b7,b2,b8)}}return this}};var R=ay.Cropper;var S=function(){function cc(ci){var ch=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};aE(this,cc);if(!ci||!bb.test(ci.tagName)){throw new Error("The first argument is required and must be an <img> or <canvas> element.")}this.element=ci;this.options=ai({},W,x(ch)&&ch);this.cropped=false;this.disabled=false;this.pointers={};this.ready=false;this.reloading=false;this.replaced=false;this.sized=false;this.sizing=false;this.init()}a9(cc,[{key:"init",value:function cf(){var cj=this.element;var ci=cj.tagName.toLowerCase();var ch;if(cj[N]){return}cj[N]=this;if(ci==="img"){this.isImg=true;ch=cj.getAttribute("src")||"";this.originalUrl=ch;if(!ch){return}ch=cj.src}else{if(ci==="canvas"&&window.HTMLCanvasElement){ch=cj.toDataURL()}}this.load(ch)}},{key:"load",value:function ce(ci){var cm=this;if(!ci){return}this.url=ci;this.imageData={};var cj=this.element,ch=this.options;if(!ch.rotatable&&!ch.scalable){ch.checkOrientation=false}if(!ch.checkOrientation||!window.ArrayBuffer){this.clone();return}if(ba.test(ci)){if(bF.test(ci)){this.read(aH(ci))}else{this.clone()}return}var ck=new XMLHttpRequest();var cl=this.clone.bind(this);this.reloading=true;this.xhr=ck;ck.onabort=cl;ck.onerror=cl;ck.ontimeout=cl;ck.onprogress=function(){if(ck.getResponseHeader("content-type")!==aL){ck.abort()}};ck.onload=function(){cm.read(ck.response)};ck.onloadend=function(){cm.reloading=false;cm.xhr=null};if(ch.checkCrossOrigin&&bk(ci)&&cj.crossOrigin){ci=bT(ci)}ck.open("GET",ci);ck.responseType="arraybuffer";ck.withCredentials=cj.crossOrigin==="use-credentials";ck.send()}},{key:"read",value:function b7(cm){var cl=this.options,co=this.imageData;var ci=z(cm);var ck=0;var cj=1;var ch=1;if(ci>1){this.url=ab(cm,aL);var cn=l(ci);ck=cn.rotate;cj=cn.scaleX;ch=cn.scaleY}if(cl.rotatable){co.rotate=ck}if(cl.scalable){co.scaleX=cj;co.scaleY=ch}this.clone()}},{key:"clone",value:function ca(){var cj=this.element,ci=this.url;var ch=cj.crossOrigin;var ck=ci;if(this.options.checkCrossOrigin&&bk(ci)){if(!ch){ch="anonymous"}ck=bT(ci)}this.crossOrigin=ch;this.crossOriginUrl=ck;var cl=document.createElement("img");if(ch){cl.crossOrigin=ch}cl.src=ck||ci;cl.alt=cj.alt||"The image to crop";this.image=cl;cl.onload=this.start.bind(this);cl.onerror=this.stop.bind(this);y(cl,al);cj.parentNode.insertBefore(cl,cj.nextSibling)}},{key:"start",value:function b6(){var ck=this;var cm=this.image;cm.onload=null;cm.onerror=null;this.sizing=true;var cj=ay.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ay.navigator.userAgent);var ci=function ci(cn,co){ai(ck.imageData,{naturalWidth:cn,naturalHeight:co,aspectRatio:cn/co});ck.sizing=false;ck.sized=true;ck.build()};if(cm.naturalWidth&&!cj){ci(cm.naturalWidth,cm.naturalHeight);return}var cl=document.createElement("img");var ch=document.body||document.documentElement;this.sizingImage=cl;cl.onload=function(){ci(cl.width,cl.height);if(!cj){ch.removeChild(cl)}};cl.src=cm.src;if(!cj){cl.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;";ch.appendChild(cl)}}},{key:"stop",value:function cb(){var ch=this.image;ch.onload=null;ch.onerror=null;ch.parentNode.removeChild(ch);this.image=null}},{key:"build",value:function cd(){if(!this.sized||this.ready){return}var cn=this.element,cq=this.options,ck=this.image;var ci=cn.parentNode;var cp=document.createElement("div");cp.innerHTML=an;var ch=cp.querySelector(".".concat(N,"-container"));var cj=ch.querySelector(".".concat(N,"-canvas"));var cm=ch.querySelector(".".concat(N,"-drag-box"));var cl=ch.querySelector(".".concat(N,"-crop-box"));var co=cl.querySelector(".".concat(N,"-face"));this.container=ci;this.cropper=ch;this.canvas=cj;this.dragBox=cm;this.cropBox=cl;this.viewBox=ch.querySelector(".".concat(N,"-view-box"));this.face=co;cj.appendChild(ck);y(cn,g);ci.insertBefore(ch,cn.nextSibling);if(!this.isImg){a6(ck,al)}this.initPreview();this.bind();cq.initialAspectRatio=Math.max(0,cq.initialAspectRatio)||NaN;cq.aspectRatio=Math.max(0,cq.aspectRatio)||NaN;cq.viewMode=Math.max(0,Math.min(3,Math.round(cq.viewMode)))||0;y(cl,g);if(!cq.guides){y(cl.getElementsByClassName("".concat(N,"-dashed")),g)}if(!cq.center){y(cl.getElementsByClassName("".concat(N,"-center")),g)}if(cq.background){y(ch,"".concat(N,"-bg"))}if(!cq.highlight){y(co,ak)}if(cq.cropBoxMovable){y(co,b2);aw(co,bp,ag)}if(!cq.cropBoxResizable){y(cl.getElementsByClassName("".concat(N,"-line")),g);y(cl.getElementsByClassName("".concat(N,"-point")),g)}this.render();this.ready=true;this.setDragMode(cq.dragMode);if(cq.autoCrop){this.crop()}this.setData(cq.data);if(o(cq.ready)){bv(cn,am,cq.ready,{once:true})}aV(cn,am)}},{key:"unbuild",value:function cg(){if(!this.ready){return}this.ready=false;this.unbind();this.resetPreview();this.cropper.parentNode.removeChild(this.cropper);a6(this.element,g)}},{key:"uncreate",value:function b5(){if(this.ready){this.unbuild();this.ready=false;this.cropped=false}else{if(this.sizing){this.sizingImage.onload=null;this.sizing=false;this.sized=false}else{if(this.reloading){this.xhr.onabort=null;this.xhr.abort()}else{if(this.image){this.stop()}}}}}}],[{key:"noConflict",value:function b8(){window.Cropper=R;return cc}},{key:"setDefaults",value:function b9(ch){ai(W,x(ch)&&ch)}}]);return cc}();ai(S.prototype,Z,a,bU,a5,aP,az);if(bL.fn){var bX=bL.fn.cropper;var j="cropper";bL.fn.cropper=function ad(b9){for(var b6=arguments.length,b7=new Array(b6>1?b6-1:0),b8=1;b8<b6;b8++){b7[b8-1]=arguments[b8]}var b5;this.each(function(cd,cc){var ca=bL(cc);var cg=b9==="destroy";var cf=ca.data(j);if(!cf){if(cg){return}var cb=bL.extend({},ca.data(),bL.isPlainObject(b9)&&b9);cf=new S(cc,cb);ca.data(j,cf)}if(typeof b9==="string"){var ce=cf[b9];if(bL.isFunction(ce)){b5=ce.apply(cf,b7);if(b5===cf){b5=undefined}if(cg){ca.removeData(j)}}}});return b5!==undefined?b5:this};bL.fn.cropper.Constructor=S;bL.fn.cropper.setDefaults=S.setDefaults;bL.fn.cropper.noConflict=function bQ(){bL.fn.cropper=bX;return this}}}));