(function(a){if(typeof define==="function"&&define.amd)define(["jquery"],a);else if(typeof exports==="object")a(require("jquery"));else a(jQuery)})(function(a,d){function e(){return new Date(Date.UTC.apply(Date,arguments))}function g(){var a=new Date;return e(a.getFullYear(),a.getMonth(),a.getDate())}function o(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function l(a){return function(){return this[a].apply(this,arguments)}}var k=function(){var b={"get":function(a){return this.slice(a)[0]},contains:function(b){for(var c=b&&b.valueOf(),a=0,d=this.length;a<d;a++)if(this[a].valueOf()===c)return a;return-1},remove:function(a){this.splice(a,1)},replace:function(b){if(!b)return;if(!a.isArray(b))b=[b];this.clear();this.push.apply(this,b)},clear:function(){this.length=0},copy:function(){var a=new k;a.replace(this);return a}};return function(){var c=[];c.push.apply(c,arguments);a.extend(c,b);return c}}(),f=function(c,d){this._process_options(d);this.dates=new k;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=a(c);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this.picker=a(b.template);this._buildEvents();this._attachEvents();if(this.isInline)this.picker.addClass("datepicker-inline").appendTo(this.element);else this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(b,a){return parseInt(a)+1});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();this.isInline&&this.show()};f.prototype={constructor:f,_process_options:function(o){this._o=a.extend({},this._o,o);var f=this.o=a.extend({},this._o),j=f.language;if(!c[j]){j=j.split("-")[0];if(!c[j])j=i.language}f.language=j;switch(f.startView){case 2:case"decade":f.startView=2;break;case 1:case"year":f.startView=1;break;default:f.startView=0}switch(f.minViewMode){case 1:case"months":f.minViewMode=1;break;case 2:case"years":f.minViewMode=2;break;default:f.minViewMode=0}switch(f.maxViewMode){case 0:case"days":f.maxViewMode=0;break;case 1:case"months":f.maxViewMode=1;break;default:f.maxViewMode=2}f.startView=Math.min(f.startView,f.maxViewMode);f.startView=Math.max(f.startView,f.minViewMode);if(f.multidate!==true){f.multidate=Number(f.multidate)||false;if(f.multidate!==false)f.multidate=Math.max(0,f.multidate)}f.multidateSeparator=String(f.multidateSeparator);f.weekStart%=7;f.weekEnd=(f.weekStart+6)%7;var l=b.parseFormat(f.format);if(f.startDate!==-Infinity)if(!!f.startDate)if(f.startDate instanceof Date)f.startDate=this._local_to_utc(this._zero_time(f.startDate));else f.startDate=b.parseDate(f.startDate,l,f.language);else f.startDate=-Infinity;if(f.endDate!==Infinity)if(!!f.endDate)if(f.endDate instanceof Date)f.endDate=this._local_to_utc(this._zero_time(f.endDate));else f.endDate=b.parseDate(f.endDate,l,f.language);else f.endDate=Infinity;f.daysOfWeekDisabled=f.daysOfWeekDisabled||[];if(!a.isArray(f.daysOfWeekDisabled))f.daysOfWeekDisabled=f.daysOfWeekDisabled.split(/[,\s]*/);f.daysOfWeekDisabled=a.map(f.daysOfWeekDisabled,function(a){return parseInt(a,10)});f.daysOfWeekHighlighted=f.daysOfWeekHighlighted||[];if(!a.isArray(f.daysOfWeekHighlighted))f.daysOfWeekHighlighted=f.daysOfWeekHighlighted.split(/[,\s]*/);f.daysOfWeekHighlighted=a.map(f.daysOfWeekHighlighted,function(a){return parseInt(a,10)});f.datesDisabled=f.datesDisabled||[];if(!a.isArray(f.datesDisabled)){var m=[];m.push(b.parseDate(f.datesDisabled,l,f.language));f.datesDisabled=m}f.datesDisabled=a.map(f.datesDisabled,function(a){return b.parseDate(a,l,f.language)});var h=String(f.orientation).toLowerCase().split(/\s+/g),k=f.orientation.toLowerCase();h=a.grep(h,function(a){return/^auto|left|right|top|bottom$/.test(a)});f.orientation={x:"auto",y:"auto"};if(!(!k||k==="auto"))if(h.length===1)switch(h[0]){case"top":case"bottom":f.orientation.y=h[0];break;case"left":case"right":f.orientation.x=h[0]}else{k=a.grep(h,function(a){return/^left|right$/.test(a)});f.orientation.x=k[0]||"auto";k=a.grep(h,function(a){return/^top|bottom$/.test(a)});f.orientation.y=k[0]||"auto"}if(f.defaultViewDate){var p=f.defaultViewDate.year||(new Date).getFullYear(),n=f.defaultViewDate.month||0,q=f.defaultViewDate.day||1;f.defaultViewDate=e(p,n,q)}else f.defaultViewDate=g();f.showOnFocus=f.showOnFocus!==d?f.showOnFocus:true},_events:[],_secondaryEvents:[],_applyEvents:function(b){for(var a=0,f,c,e;a<b.length;a++){f=b[a][0];if(b[a].length===2){c=d;e=b[a][1]}else if(b[a].length===3){c=b[a][1];e=b[a][2]}f.on(e,c)}},_unapplyEvents:function(b){for(var a=0,f,e,c;a<b.length;a++){f=b[a][0];if(b[a].length===2){c=d;e=b[a][1]}else if(b[a].length===3){c=b[a][1];e=b[a][2]}f.off(e,c)}},_buildEvents:function(){var b={keyup:a.proxy(function(b){a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};if(this.o.showOnFocus===true)b.focus=a.proxy(this.show,this);if(this.isInput)this._events=[[this.element,b]];else if(this.component&&this.hasInput)this._events=[[this.element.find("input"),b],[this.component,{click:a.proxy(this.show,this)}]];else if(this.element.is("div"))this.isInline=true;else this._events=[[this.element,{click:a.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){!(this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.picker.hasClass("datepicker-inline"))&&this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,d){var f=d||this.dates.get(-1),c=this._utc_to_local(f);this.element.trigger({type:e,date:c,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(c,a){if(arguments.length===0){c=this.dates.length-1;a=this.o.format}else if(typeof c==="string"){a=c;c=this.dates.length-1}a=a||this.o.format;var d=this.dates.get(c);return b.formatDate(d,a,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===false)return;!this.isInline&&this.picker.appendTo(this.o.container);this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur();return this},hide:function(){if(this.isInline)return this;if(!this.picker.is(":visible"))return this;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue();this._trigger("hide");return this},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput)delete this.element.data().date;return this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&a.inArray("text/plain",b.originalEvent.clipboardData.types)!==-1)c=b.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)c=window.clipboardData.getData("Text");else return;this.setDate(c);this.update();b.preventDefault()},_utc_to_local:function(a){return a&&new Date(a.getTime()+a.getTimezoneOffset()*6e4)},_local_to_utc:function(a){return a&&new Date(a.getTime()-a.getTimezoneOffset()*6e4)},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return typeof a!=="undefined"?new Date(a):null},clearDates:function(){var a;if(this.isInput)a=this.element;else if(this.component)a=this.element.find("input");a&&a.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:l("setDates"),setUTCDate:l("setUTCDates"),setValue:function(){var a=this.getFormattedDate();if(!this.isInput)this.component&&this.element.find("input").val(a);else this.element.val(a);return this},getFormattedDate:function(c){if(c===d)c=this.o.format;var e=this.o.language;return a.map(this.dates,function(a){return b.formatDate(a,c,e)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows();return this},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();this.updateNavArrows();return this},setDaysOfWeekHighlighted:function(a){this._process_options({daysOfWeekHighlighted:a});this.update();return this},setDatesDisabled:function(a){this._process_options({datesDisabled:a});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return this;var i=this.picker.outerWidth(),h=this.picker.outerHeight(),r=10,f=a(this.o.container),n=f.width(),s=f.height(),o=f.scrollTop(),l=f.offset(),k=[];this.element.parents().each(function(){var b=a(this).css("z-index");b!=="auto"&&b!==0&&k.push(parseInt(b))});var q=Math.max.apply(Math,k)+10,e=this.component?this.component.parent().offset():this.element.offset(),p=this.component?this.component.outerHeight(true):this.element.outerHeight(false),j=this.component?this.component.outerWidth(true):this.element.outerWidth(false),b=e.left-l.left,c=e.top-l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right")b-=i-j}else if(e.left<0){this.picker.addClass("datepicker-orient-left");b-=e.left-r}else if(b+i>n){this.picker.addClass("datepicker-orient-right");b=e.left+j-i}else this.picker.addClass("datepicker-orient-left");var d=this.o.orientation.y,m,g;if(d==="auto"){m=-o+c-h;g=o+s-(c+p+h);if(Math.max(m,g)===g)d="top";else d="bottom"}this.picker.addClass("datepicker-orient-"+d);if(d==="top")c-=h+parseInt(this.picker.css("padding-top"));else c+=p;if(this.o.rtl){var t=n-(b+j);this.picker.css({top:c,right:t,zIndex:q})}else this.picker.css({top:c,left:b,zIndex:q});return this},_allow_update:true,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),c=[],d=false;if(arguments.length){a.each(arguments,a.proxy(function(b,a){if(a instanceof Date)a=this._local_to_utc(a);c.push(a)},this));d=true}else{c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(c&&this.o.multidate)c=c.split(this.o.multidateSeparator);else c=[c];delete this.element.data().date}c=a.map(c,a.proxy(function(a){return b.parseDate(a,this.o.format,this.o.language)},this));c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),true);this.dates.replace(c);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);else this.viewDate=this.o.defaultViewDate;if(d)this.setValue();else if(c.length)String(e)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&e.length&&this._trigger("clearDate");this.fill();this.element.change();return this},fillDow:function(){var b=this.o.weekStart,a="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(b,a){return parseInt(a)+1});a+='<th class="cw">&#160;</th>'}while(b<this.o.weekStart+7)a+='<th class="dow">'+c[this.o.language].daysMin[b++%7]+"</th>";a+="</tr>";this.picker.find(".datepicker-days thead").append(a)},fillMonths:function(){var a="",b=0;while(b<12)a+='<span class="month">'+c[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){if(!b||!b.length)delete this.range;else this.range=a.map(b,function(a){return a.valueOf()});this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),e=new Date;if(b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<f)c.push("old");else(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>f)&&c.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused");this.o.todayHighlight&&b.getUTCFullYear()===e.getFullYear()&&b.getUTCMonth()===e.getMonth()&&b.getUTCDate()===e.getDate()&&c.push("today");this.dates.contains(b)!==-1&&c.push("active");(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&c.push("disabled");(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1)&&c.push("highlighted");this.o.datesDisabled.length>0&&a.grep(this.o.datesDisabled,function(a){return o(b,a)}).length>0&&c.push("disabled","disabled-date");if(this.range){b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range");a.inArray(b.valueOf(),this.range)!==-1&&c.push("selected")}return c},fill:function(){var x=new Date(this.viewDate),f=x.getUTCFullYear(),s=x.getUTCMonth(),q=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,z=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,r=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,B=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,C=c[this.o.language].today||c.en.today||"",A=c[this.o.language].clear||c.en.clear||"",y=c[this.o.language].titleFormat||c.en.titleFormat,l;if(isNaN(f)||isNaN(s))return;this.picker.find(".datepicker-days thead .datepicker-switch").text(b.formatDate(new Date(f,s+1),y,this.o.language));this.picker.find("tfoot .today").text(C).toggle(this.o.todayBtn!==false);this.picker.find("tfoot .clear").text(A).toggle(this.o.clearBtn!==false);this.picker.find("thead .datepicker-title").text(this.o.title).toggle(this.o.title!=="");this.updateNavArrows();this.fillMonths();var g=e(f,s-1,28),u=b.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(u);g.setUTCDate(u-(g.getUTCDay()-this.o.weekStart+7)%7);var n=new Date(g);n.setUTCDate(n.getUTCDate()+42);n=n.valueOf();var m=[],k;while(g.valueOf()<n){if(g.getUTCDay()===this.o.weekStart){m.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*8.64e7),v=new Date(Number(w)+(7+4-w.getUTCDay())%7*8.64e7),t=new Date(Number(t=e(v.getUTCFullYear(),0,1))+(7+4-t.getUTCDay())%7*8.64e7),E=(v-t)/8.64e7/7+1;m.push('<td class="cw">'+E+"</td>")}}k=this.getClassNames(g);k.push("day");if(this.o.beforeShowDay!==a.noop){var i=this.o.beforeShowDay(this._utc_to_local(g));if(i===d)i={};else if(typeof i==="boolean")i={enabled:i};else if(typeof i==="string")i={classes:i};i.enabled===false&&k.push("disabled");if(i.classes)k=k.concat(i.classes.split(/\s+/));if(i.tooltip)l=i.tooltip}k=a.unique(k);m.push('<td class="'+k.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+g.getUTCDate()+"</td>");l=null;g.getUTCDay()===this.o.weekEnd&&m.push("</tr>");g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var o=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?"Months":f).end().find("span").removeClass("active");a.each(this.dates,function(b,a){a.getUTCFullYear()===f&&o.eq(a.getUTCMonth()).addClass("active")});(f<q||f>r)&&o.addClass("disabled");f===q&&o.slice(0,z).addClass("disabled");f===r&&o.slice(B+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var G=this;a.each(o,function(e,b){if(!a(b).hasClass("disabled")){var d=new Date(f,e,1),c=G.o.beforeShowMonth(d);c===false&&a(b).addClass("disabled")}})}m="";f=parseInt(f/10,10)*10;var D=this.picker.find(".datepicker-years").find(".datepicker-switch").text(f+"-"+(f+9)).end().find("td");f-=1;for(var F=a.map(this.dates,function(a){return a.getUTCFullYear()}),j,p=-1;p<11;p++){j=["year"];l=null;if(p===-1)j.push("old");else p===10&&j.push("new");a.inArray(f,F)!==-1&&j.push("active");(f<q||f>r)&&j.push("disabled");if(this.o.beforeShowYear!==a.noop){var h=this.o.beforeShowYear(new Date(f,0,1));if(h===d)h={};else if(typeof h==="boolean")h={enabled:h};else if(typeof h==="string")h={classes:h};h.enabled===false&&j.push("disabled");if(h.classes)j=j.concat(h.classes.split(/\s+/));if(h.tooltip)l=h.tooltip}m+='<span class="'+j.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+f+"</span>";f+=1}D.html(m)},updateNavArrows:function(){if(!this._allow_update)return;var c=new Date(this.viewDate),a=c.getUTCFullYear(),b=c.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&a<=this.o.startDate.getUTCFullYear()&&b<=this.o.startDate.getUTCMonth())this.picker.find(".prev").css({visibility:"hidden"});else this.picker.find(".prev").css({visibility:"visible"});if(this.o.endDate!==Infinity&&a>=this.o.endDate.getUTCFullYear()&&b>=this.o.endDate.getUTCMonth())this.picker.find(".next").css({visibility:"hidden"});else this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:if(this.o.startDate!==-Infinity&&a<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2)this.picker.find(".prev").css({visibility:"hidden"});else this.picker.find(".prev").css({visibility:"visible"});if(this.o.endDate!==Infinity&&a>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2)this.picker.find(".next").css({visibility:"hidden"});else this.picker.find(".next").css({visibility:"visible"})}},click:function(i){i.preventDefault();i.stopPropagation();var c=a(i.target).closest("span, td, th"),f,d,g;if(c.length===1)switch(c[0].nodeName.toLowerCase()){case"th":switch(c[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var j=b.modes[this.viewMode].navStep*(c[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,j);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,j);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var h=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0);this.showMode(-2);var k=this.o.todayBtn==="linked"?null:"view";this._setDate(h,k);break;case"clear":this.clearDates()}break;case"span":if(!c.hasClass("disabled")){this.viewDate.setUTCDate(1);if(c.hasClass("month")){g=1;d=c.parent().find("span").index(c);f=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(d);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(e(f,d,g));this.showMode()}else this.showMode(-1)}else{g=1;d=0;f=parseInt(c.text(),10)||0;this.viewDate.setUTCFullYear(f);this._trigger("changeYear",this.viewDate);this.o.minViewMode===2&&this._setDate(e(f,d,g));this.showMode(-1)}this.fill()}break;case"td":if(c.hasClass("day")&&!c.hasClass("disabled")){g=parseInt(c.text(),10)||1;f=this.viewDate.getUTCFullYear();d=this.viewDate.getUTCMonth();if(c.hasClass("old"))if(d===0){d=11;f-=1}else d-=1;else if(c.hasClass("new"))if(d===11){d=0;f+=1}else d+=1;this._setDate(e(f,d,g))}}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);!a&&this.dates.clear();if(b!==-1)(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b);else if(this.o.multidate===false){this.dates.clear();this.dates.push(a)}else this.dates.push(a);if(typeof this.o.multidate==="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(c,a){(!a||a==="date")&&this._toggle_multidate(c&&new Date(c));if(!a||a==="view")this.viewDate=c&&new Date(c);this.fill();this.setValue();(!a||a!=="view")&&this._trigger("changeDate");var b;if(this.isInput)b=this.element;else if(this.component)b=this.element.find("input");b&&b.change();this.o.autoclose&&(!a||a==="date")&&this.hide()},moveMonth:function(e,c){if(!e)return d;if(!c)return e;var a=new Date(e.valueOf()),h=a.getUTCDate(),g=a.getUTCMonth(),i=Math.abs(c),b,f;c=c>0?1:-1;if(i===1){f=c===-1?function(){return a.getUTCMonth()===g}:function(){return a.getUTCMonth()!==b};b=g+c;a.setUTCMonth(b);if(b<0||b>11)b=(b+12)%12}else{for(var j=0;j<i;j++)a=this.moveMonth(a,c);b=a.getUTCMonth();a.setUTCDate(h);f=function(){return b!==a.getUTCMonth()}}while(f()){a.setUTCDate(--h);a.setUTCMonth(b)}return a},moveYear:function(a,b){return this.moveMonth(a,b*12)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(!this.picker.is(":visible")){(a.keyCode===40||a.keyCode===27)&&this.show();return}var h=false,b,e,c,d=this.focusDate||this.viewDate;switch(a.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=a.keyCode===37?-1:1;if(a.ctrlKey){e=this.moveYear(this.dates.get(-1)||g(),b);c=this.moveYear(d,b);this._trigger("changeYear",this.viewDate)}else if(a.shiftKey){e=this.moveMonth(this.dates.get(-1)||g(),b);c=this.moveMonth(d,b);this._trigger("changeMonth",this.viewDate)}else{e=new Date(this.dates.get(-1)||g());e.setUTCDate(e.getUTCDate()+b);c=new Date(d);c.setUTCDate(d.getUTCDate()+b)}if(this.dateWithinRange(c)){this.focusDate=this.viewDate=c;this.setValue();this.fill();a.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=a.keyCode===38?-1:1;if(a.ctrlKey){e=this.moveYear(this.dates.get(-1)||g(),b);c=this.moveYear(d,b);this._trigger("changeYear",this.viewDate)}else if(a.shiftKey){e=this.moveMonth(this.dates.get(-1)||g(),b);c=this.moveMonth(d,b);this._trigger("changeMonth",this.viewDate)}else{e=new Date(this.dates.get(-1)||g());e.setUTCDate(e.getUTCDate()+b*7);c=new Date(d);c.setUTCDate(d.getUTCDate()+b*7)}if(this.dateWithinRange(c)){this.focusDate=this.viewDate=c;this.setValue();this.fill();a.preventDefault()}break;case 13:d=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(d);h=true}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){a.preventDefault();if(typeof a.stopPropagation==="function")a.stopPropagation();else a.cancelBubble=true;this.o.autoclose&&this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}if(h){if(this.dates.length)this._trigger("changeDate");else this._trigger("clearDate");var f;if(this.isInput)f=this.element;else if(this.component)f=this.element.find("input");f&&f.change()}},showMode:function(a){if(a)this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+a));this.picker.children("div").hide().filter(".datepicker-"+b.modes[this.viewMode].clsName).show();this.updateNavArrows()}};var j=function(c,b){this.element=a(c);this.inputs=a.map(b.inputs,function(a){return a.jquery?a[0]:a});delete b.inputs;h.call(a(this.inputs),b).on("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")});this.updateDates()};j.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(c,a){a.setRange(b)})},dateUpdated:function(g){if(this.updating)return;this.updating=true;var f=a(g.target).data("datepicker");if(typeof f==="undefined")return;var b=f.getUTCDate(),e=a.inArray(g.target,this.inputs),c=e-1,d=e+1,h=this.inputs.length;if(e===-1)return;a.each(this.pickers,function(c,a){!a.getUTCDate()&&a.setUTCDate(b)});if(b<this.dates[c])while(c>=0&&b<this.dates[c])this.pickers[c--].setUTCDate(b);else if(b>this.dates[d])while(d<h&&b>this.dates[d])this.pickers[d++].setUTCDate(b);this.updateDates();delete this.updating},remove:function(){a.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};function n(i,b){var e=a(i).data(),f={},d,h=new RegExp("^"+b.toLowerCase()+"([A-Z])");b=new RegExp("^"+b.toLowerCase());function g(b,a){return a.toLowerCase()}for(var c in e)if(b.test(c)){d=c.replace(h,g);f[d]=e[c]}return f}function m(b){var d={};if(!c[b]){b=b.split("-")[0];if(!c[b])return}var e=c[b];a.each(p,function(b,a){if(a in e)d[a]=e[a]});return d}var q=a.fn.datepicker,h=function(b){var e=Array.apply(null,arguments);e.shift();var c;this.each(function(){var h=a(this),g=h.data("datepicker"),l=typeof b==="object"&&b;if(!g){var o=n(this,"date"),r=a.extend({},i,o,l),p=m(r.language),k=a.extend({},i,p,o,l);if(h.hasClass("input-daterange")||k.inputs){var q={inputs:k.inputs||h.find("input").toArray()};h.data("datepicker",g=new j(this,a.extend(k,q)))}else h.data("datepicker",g=new f(this,k))}if(typeof b==="string"&&typeof g[b]==="function"){c=g[b].apply(g,e);if(c!==d)return false}});return c!==d?c:this};a.fn.datepicker=h;var i=a.fn.datepicker.defaults={autoclose:false,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"cn",minViewMode:0,maxViewMode:2,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,container:"body",immediateUpdates:false,title:""},p=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=f;var c=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"},cn:{days:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],daysShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],today:"\u4eca\u5929",clear:"\u6e05\u9664",titleFormat:"MM yyyy"}},b={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(c,a){return([31,b.isLeapYear(c)?29:28,31,30,31,30,31,31,30,31,30,31])[a]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(c){var a=c.replace(this.validParts,"\0").split("\0"),b=c.match(this.validParts);if(!a||!a.length||!b||b.length===0)throw new Error("Invalid date format.");return{separators:a,parts:b}},parseDate:function(g,r,q){if(!g)return d;if(g instanceof Date)return g;if(typeof r==="string")r=b.parseFormat(r);var x=/([\-+]\d+)([dmwy])/,i=g.match(/([\-+]\d+)([dmwy])/g),l,m,h;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(g)){g=new Date;for(h=0;h<i.length;h++){l=x.exec(i[h]);m=parseInt(l[1]);switch(l[2]){case"d":g.setUTCDate(g.getUTCDate()+m);break;case"m":g=f.prototype.moveMonth.call(f.prototype,g,m);break;case"w":g.setUTCDate(g.getUTCDate()+m*7);break;case"y":g=f.prototype.moveYear.call(f.prototype,g,m)}}return e(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),0,0,0)}i=g&&g.match(this.nonpunctuation)||[];g=new Date;var s={},u=["yyyy","yy","M","MM","m","mm","d","dd"],j={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;b-=1;while(b<0)b+=12;b%=12;a.setUTCMonth(b);while(a.getUTCMonth()!==b)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},n,p;j.M=j.MM=j.mm=j.m;j.dd=j.d;g=e(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0);var k=r.parts.slice();if(i.length!==k.length)k=a(k).filter(function(c,b){return a.inArray(b,u)!==-1}).toArray();function v(){var a=this.slice(0,i[h].length),b=i[h].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(i.length===k.length){var w;for(h=0,w=k.length;h<w;h++){n=parseInt(i[h],10);l=k[h];if(isNaN(n))switch(l){case"MM":p=a(c[q].months).filter(v);n=a.inArray(p[0],c[q].months)+1;break;case"M":p=a(c[q].monthsShort).filter(v);n=a.inArray(p[0],c[q].monthsShort)+1}s[l]=n}var t,o;for(h=0;h<u.length;h++){o=u[h];if(o in s&&!isNaN(s[o])){t=new Date(g);j[o](t,s[o]);if(!isNaN(t))g=t}}}return g},formatDate:function(d,f,g){if(!d)return"";if(typeof f==="string")f=b.parseFormat(f);var e={d:d.getUTCDate(),D:c[g].daysShort[d.getUTCDay()],DD:c[g].days[d.getUTCDay()],m:d.getUTCMonth()+1,M:c[g].monthsShort[d.getUTCMonth()],MM:c[g].months[d.getUTCMonth()],yy:d.getUTCFullYear().toString().substring(2),yyyy:d.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d;e.mm=(e.m<10?"0":"")+e.m;d=[];for(var i=a.extend([],f.separators),h=0,j=f.parts.length;h<=j;h++){i.length&&d.push(i.shift());d.push(e[f.parts[h]])}return d.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};b.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+b.headTemplate+"<tbody></tbody>"+b.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=b;a.fn.datepicker.noConflict=function(){a.fn.datepicker=q;return this};a.fn.datepicker.version="1.4.1-dev";a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(c){var b=a(this);if(b.data("datepicker"))return;c.preventDefault();h.call(b,"show")});a(function(){h.call(a('[data-provide="datepicker-inline"]'))})})